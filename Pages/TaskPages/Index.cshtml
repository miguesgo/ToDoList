@page
@model ToDoList.Pages.TaskPages.IndexModel

<div class="task-banner">
    <img src="https://images.unsplash.com/photo-1528164344705-47542687000d?ixlib=rb-4.0.3&q=85&fm=jpg&crop=entropy&cs=srgb&w=4800" alt="Banner" />
</div>

<div class="container p-3 ToDo-form">
    <div class="row pt-4">
        <div class="col-6">
            <h2>Notes</h2>
            <h6><i class="bi bi-clock"></i> &nbsp; Creado &nbsp; @DateTime.Today</h6>
        </div>
        <div class="col-6 text-end">
            <a asp-page="create" class="ToDo-btn-primary">
                <i class="bi bi-plus-lg"></i> &nbsp; Create a new Task
            </a>
        </div>
        <div class="text-end">
            <h6>Sort by
                <select id="sort" onchange="sortTasks()">
                    <option value="name">Name</option>
                    <option value="date">Due Date</option>
                    <option value="status">Status</option>
                </select>
            </h6>
        </div>
    </div>

    <br /><br />

    <div id="taskList">
        @await Html.PartialAsync("_SortByPartial", Model.ToDoTasks)
    </div>
</div>

<script>
    function sortTasks() {
        var sortValue = document.getElementById("sort").value;

        $.get("/TaskPages/Index?SortOrder=" + sortValue, function (data) {
            console.log("Response received:", data); // ✅ Should be the TaskPages Index
            $("#taskList").html(data);
        });
    }
</script>